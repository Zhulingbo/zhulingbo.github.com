<!DOCTYPE html>
<!--[if IEMobile 7 ]>
<html class="no-js iem7"> <![endif]-->
<!--[if (gt IEMobile 7)|!(IEMobile)]><!-->
<html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <title>KFC</title>
    <meta name="description" content="">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="cleartype" content="on">
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <link rel="stylesheet" href="css/common.css">
    <script type="text/javascript" src="js/jquery.min2.0.3.js" ></script>
    <script type="text/javascript" src="js/hammer.js"></script>
    <link rel="stylesheet" href="css/style.css" />
    <style type="text/css">
    </style>
</head>
<body>
<div class="code_mask">
  <div class="box">
      <a href="javascript:;" class="close">
        <img src="img/close.png" width="100%">
      </a>
      <p class="txt1">长按下方二维码<br>
关注<em>优衣库官方微信</em></p>
    <img src="img/qr_code.jpg" class="qr">
    <img src="img/qr_txt2.png" class="txt2">
  </div>
</div>
<!-- container -->
<div class="container po_photo">
  <!-- page1 -->
  <!-- <div class="page1">
    <img src="img/po_title.png" class="po_title">
    <img src="img/po_photo_frame.jpg" class="po_photo_frame">
    <a href="javascript:;" class="po_btn">
      <img src="img/po_btn.png" width="100%">
    </a>
  </div> -->
  <!-- page1 -->
  <!-- page2 -->
  <div class="page2">
    <div class="pic">
      <canvas id="mycanvas" width="296" height="480"></canvas>
      <!-- <canvas id="mycanvas2" width="296" height="480"></canvas> -->
    </div>
    <div class="btn clearfix">
      <input type="file" id="file_input" class="change"/>
      <span class="c">
        <img src="img/change_one.png" width="100%">
      </span>
      <a href="javascript:;" class="finish">
        <img src="img/finish.png" width="100%">
      </a>
    </div>
  </div>
  <!-- page2 -->
</div>
<!-- container -->
<script src="js/app.min.js" id="appjs" data-adapt="1" ></script>
<script type="text/javascript">
$(function() {
    $('.code_mask').on('touchmove', function (event) {
        event.preventDefault();
    });
    $(".attention").on('click',function(){
      $(".code_mask").show();
    })
    $(".close").on('click',function(){
      $(".code_mask").hide();
    })
    $(".po_btn").on('click',function(){
      $(".page1").fadeOut();
      $(".page2").fadeIn();
    })


    //canvas
    var canW = $(".pic").width();
    var canH = $(".pic").height();
    // alert(canW);
    // alert(canH);
    var canvas = document.getElementById("mycanvas");
    var ctx = canvas.getContext("2d");
    var img = new Image();
    var img2 = new Image();
    img.src="img/result_img.png";
    img2.src="img/photo_frame.png";
    img.onload = function(){
      // ctx.drawImage(img, 0, 0,296,480);
      ctx.drawImage(img2, 0, 0,296,480);
    }


    //提交图片
    $('input[type=file]').change(function(){
        var file=this.files[0];
        var reader=new FileReader();
        reader.onload=function(){
            // 通过 reader.result 来访问生成的 DataURL
            var url=reader.result;
            setImageURL(url);
        };
        reader.readAsDataURL(file);
    })
    function setImageURL(url){
    img.src=url;
    img.onload = function(){
      ctx.drawImage(img, 0, 0);
      ctx.drawImage(img2, 0, 0,296,480);
    }
}

});
</script>
</body>
</html>